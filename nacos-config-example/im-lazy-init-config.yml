# ============================================================================
# Lazy Initialization Configuration for IM System
# ============================================================================
# This configuration file manages lazy initialization settings for all services.
# Deploy this file to Nacos configuration center with the name: im-lazy-init-config.yml
#
# Configuration Structure:
#   - id: Service identifier, must match spring.application.name
#   - enabled: Whether lazy initialization is enabled for this service
#   - exclude-patterns: Regex patterns for classes that should NOT be lazily initialized
#                       (these classes will be eagerly loaded even when lazy-init is enabled)
# ============================================================================

im:
  lazy-init:
    config:
      # -----------------------------------------------------------------------
      # Default/Common Configuration
      # These exclude patterns are applied to ALL services with lazy-init enabled
      # -----------------------------------------------------------------------
      - id: default
        enabled: false  # This 'enabled' is not used for default, only patterns matter
        exclude-patterns:
          - "org.springframework.boot.*"
          - "org.springframework.cloud.*"
          - "com.alibaba.cloud.nacos.*"
          - "com.alibaba.csp.sentinel.*"
          - "org.apache.dubbo.*"
          - "com.baomidou.*"
          - ".*StartupMetricsConfig.*"
          - ".*I18nService.*"

      # -----------------------------------------------------------------------
      # im-service
      # -----------------------------------------------------------------------
      - id: im-service
        enabled: true
        exclude-patterns: []

      # -----------------------------------------------------------------------
      # im-auth
      # -----------------------------------------------------------------------
      - id: im-auth
        enabled: true
        exclude-patterns:
          - "com.xy.auth.security.*"

      # -----------------------------------------------------------------------
      # im-database
      # -----------------------------------------------------------------------
      - id: im-database
        enabled: false
        exclude-patterns: []

      # -----------------------------------------------------------------------
      # im-database-webflux
      # -----------------------------------------------------------------------
      - id: im-database-webflux
        enabled: false
        exclude-patterns: []

      # -----------------------------------------------------------------------
      # im-leaf
      # -----------------------------------------------------------------------
      - id: im-leaf
        enabled: false
        exclude-patterns: []

      # -----------------------------------------------------------------------
      # im-gateway
      # API Gateway service
      # -----------------------------------------------------------------------
      - id: im-gateway
        enabled: true
        exclude-patterns: []

      # -----------------------------------------------------------------------
      # im-connect
      # WebSocket/TCP connection service
      # -----------------------------------------------------------------------
      - id: im-connect
        enabled: false
        exclude-patterns: []

      # -----------------------------------------------------------------------
      # im-ai
      # AI service
      # -----------------------------------------------------------------------
      - id: im-ai
        enabled: false
        exclude-patterns: []

      # -----------------------------------------------------------------------
      # im-file
      # -----------------------------------------------------------------------
      - id: im-file
        enabled: false
        exclude-patterns: []

      # -----------------------------------------------------------------------
      # im-logging
      # -----------------------------------------------------------------------
      - id: im-logging
        enabled: false
        exclude-patterns: []

      # -----------------------------------------------------------------------
      # im-platform
      # -----------------------------------------------------------------------
      - id: im-platform
        enabled: false
        exclude-patterns: []

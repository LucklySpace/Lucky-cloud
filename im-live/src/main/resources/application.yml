# ============================================
# im-live 直播服务配置
# ============================================

app:
  name: im-live
  version: 1.0.0

# ============================================
# Profile 配置
# ============================================
spring:
  profiles:
    active: dev
  main:
    banner-mode: console
  banner:
    location: classpath:banner.txt
    charset: UTF-8

# ============================================
# 直播服务配置
# ============================================
live:
  # 信令服务器配置
  signaling:
    port: 8082
    path: /ws
    ssl: false
    heartbeatInterval: 30000
    heartbeatTimeout: 90000
    maxFrameSize: 65536

  # ICE 服务器配置
  ice:
    stunServers:
      - stun:stun.l.google.com:19302
      - stun:stun1.l.google.com:19302
    turnServers: [ ]
    gatheringTimeout: 10000

  # 房间配置
  room:
    maxUsersPerRoom: 100
    maxPublishersPerRoom: 10
    idleTimeout: 300000
    allowAnonymous: true

  # WebRTC RTC 服务器配置
  rtc:
    enabled: true                    # 是否启用 WebRTC UDP 服务器
    host: 0.0.0.0                   # 监听地址
    port: 8000                       # 监听端口（处理 STUN/DTLS/RTP/RTCP）
    candidate-ip: 127.0.0.1         # 服务器候选 IP（必须配置为客户端可访问的 IP）
    candidate-port: 8000            # 服务器候选端口

  # HTTP API 服务器配置（SRS 兼容接口）
  httpApi:
    enabled: true                    # 是否启用 HTTP API 服务器
    host: 0.0.0.0                   # 监听地址
    port: 1985                       # 监听端口（SRS 默认端口）
    apiBase: /rtc/v1                 # API 基础路径

  # 性能配置
  performance:
    bossThreads: 1
    workerThreads: 0
    useVirtualThreads: true
    virtualThreadNamePrefix: live-vt-
    backlog: 1024
    preferEpoll: true


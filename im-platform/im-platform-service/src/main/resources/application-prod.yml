server:
  compression:
    # http响应的gzip压缩
    enabled: true
    # 压缩所需的最小长度，响应长度大于等于该值就会压缩，默认2KB
    min-response-size: 2048
    # 需要压缩的响应的Content-type
    mime-types:
      - image/png
      - image/jpeg
      - image/jpg
      - text/html
      - application/javascript
      - text/css
      - application/octet-stream
      - application/json

spring:
  main:
    web-application-type: reactive
  jackson:
    time-zone: UTC
  banner:
    location: classpath:banner.txt
  threads:
    virtual:
      enabled: true  # 开启虚拟线程
  servlet:
    multipart:
      enabled: true
      max-file-size: 500MB
      max-request-size: 500MB
  datasource:
    driver-class-name: org.postgresql.Driver
    url: jdbc:postgresql://127.0.0.1:5432/im-core
    username: postgres # 数据库账号
    password: 123456 # 数据库密码
  jpa:
    hibernate:
      ddl-auto: update
    show-sql: true
    database-platform: org.hibernate.dialect.PostgreSQLDialect
  data:
    redis:
      host: localhost
      port: 6379
      password:
      username:
      database: 0      # 数据库索引（默认为0）
      timeout: 1800000 # 连接超时时间（毫秒）
      lettuce:
        pool:
          max-active: 20  # 连接池最大连接数
          max-wait: -1    # 最大阻塞等待时间（负数表示无限制）
          max-idle: 5     # 最大空闲连接数
          min-idle: 0     # 最小空闲连接数

# TODO: log settings
logging:
  config: classpath:logback-plus.xml  #日志配置文件，会在当前项目下去找日志配置文件
  level:
    com.xy.lucky.*: info
    org.springframework: warn

#springdoc相关配置
springdoc:
  swagger-ui:
    path: /swagger-ui.html
    tags-sorter: alpha
    operations-sorter: alpha
  api-docs:
    enabled: true
    path: /v3/api-docs
  group-configs:
    - group: 'platform'
      paths-to-match: '/**'
      packages-to-scan: com.xy.lucky.platform  # 改为平台服务包名，确保文档扫描到控制器

oss:
  bucketName: box-im
  providers:
    default:
      name: S3
      endpoint: http://127.0.0.1:9000
      region: us-east-1
      access-key: admin
      secret-key: admin123
      path-style-access: true
  defaultProvider: default

shortlink: # 短链接
  domain: http://127.0.0.1:8090

email: # 邮件
  enabled: false
  default-provider: smtp
  smtp:
    host: ${EMAIL_SMTP_HOST:}
    port: ${EMAIL_SMTP_PORT:587}
    username: ${EMAIL_SMTP_USERNAME:}
    password: ${EMAIL_SMTP_PASSWORD:}
    from: ${EMAIL_SMTP_FROM:}
    ssl: ${EMAIL_SMTP_SSL:false}

sms: # 短信
  enabled: false
  default-provider: zhenzi
  zhenzi:
    api-url: ${SMS_ZHENZI_API_URL:https://sms_developer.zhenzikj.com}
    app-id: ${SMS_ZHENZI_APP_ID:}
    app-secret: ${SMS_ZHENZI_APP_SECRET:}
    default-template-id: ${SMS_ZHENZI_TEMPLATE_ID:10120}
